<!DOCTYPE html>
<html lang="en">
<html>
<head>
    <title>Darklight | Online image editor</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="Online image editor, Screenshots editor, Image sharing, Free to use">
    <link rel="shortcut icon" type="image/png" href="img/favicon-16x16.png" sizes="16x16"/>
    <link rel="shortcut icon" type="image/png" href="img/favicon-32x32.png" sizes="32x32"/>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/controls.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
    <div id="spinner" class="screen-block">
        <div class="screen-content">
            <h1 class="screen-message"></h1>
            <svg class="screen-image icon icon-extra-large"><use xlink:href=""></use></svg>
        </div>
    </div>

    <div id="welcome" class="modal" data-open>
        <div class="modal-content">
            <div class="modal-body">
            <section class="getting-started">
                <h1 class="center">Welcome</h1>
                <p class="center">Click <kbd>Ctrl+V</kbd> to paste an image from the clipboard</p>
                <p class="center">or drag an image to the browser</p>
                <p class="center">or choose an image from your computer</p>
                <div class="center">
                    <input id="fileBtn" class="center" type="file" accept="image/*">
                </div>
            </section>
            <section class="guide">
                <article>
                    <h3>You can... </h3>
                    <p>* load an image from the clipboard and your computer</p>
                    <p>* draw lines, rectangles, ellipses, arrows, text</p>
                    <p>* use a <code>Pen</code> to draw anything else</p>
                    <p>* download a PNG image</p>
                </article>
                <article>
                    <h3>Controls</h3>
                    <p><kbd>Ctrl+V</kbd> to paste an image from the clipboard</p>
                    <p><kbd>Ctrl+S</kbd> to download an image</p>
                    <p><kbd>Ctrl+Z</kbd> to undo an action</p>
                    <p><kbd>Ctrl+Scroll</kbd> to zoom</p>
                    </article>
            </section>
            </div>
        </div>
    </div>

    <main class="drawing-area">
        <nav class="toolbar">
            <div class="tools">
                <button class="btn btn-flat btn-dark flex-stretch" data-tool="text" data-options="color textSize">
                    <svg class="icon"><use xlink:href="img/icons.svg#text"></use></svg>
                </button>
                <button class="btn btn-flat btn-dark flex-stretch" data-tool="pen" data-options="color size">
                    <svg class="icon"><use xlink:href="img/icons.svg#pen"></use></svg>
                </button>
                <button class="btn btn-flat btn-dark flex-stretch" data-tool="line" data-options="color size">
                    <svg class="icon"><use xlink:href="img/icons.svg#line"></use></svg>
                </button>
                <button class="btn btn-flat btn-dark flex-stretch" data-tool="rectangle" data-options="color size">
                    <svg class="icon"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                </button>
                <button class="btn btn-flat btn-dark flex-stretch" data-tool="ellipse" data-options="color size">
                    <svg class="icon"><use xlink:href="img/icons.svg#ellipse"></use></svg>
                </button>
                <button class="btn btn-flat btn-dark flex-stretch" data-tool="arrow" data-options="color size">
                    <svg class="icon"><use xlink:href="img/icons.svg#arrow"></use></svg>
                </button>
                <button id="cropBtn" class="btn btn-flat btn-dark flex-stretch" data-tool="crop">
                    <svg class="icon"><use xlink:href="img/icons.svg#crop"></use></svg>
                </button>
            </div>

            <div class="options">
                <div id="sizeOption" class="dropdown dropdown-dark dropdown-flat flex-stretch hidden">
                    <button class="dropdown-toggle btn btn-flat btn-dark">
                        <input id="sizeOptionInput" type="text" value="5px">
                        <svg class="icon icon-small round-180"><use xlink:href="img/icons.svg#chevron-down"></use></svg>
                    </button>
                    <div class="dropdown-menu">
                        <div class="dropdown-group">
                            <button class="btn btn-flat btn-dark" data-dropdown-noclose data-size-change="decrease">
                                <svg class="icon"><use xlink:href="img/icons.svg#minus"></use></svg>
                            </button>
                            <button class="btn btn-flat btn-dark" data-dropdown-noclose data-size-change="increase">
                                <svg class="icon"><use xlink:href="img/icons.svg#plus"></use></svg>
                            </button>
                        </div>
                        <button class="btn btn-flat btn-dark" data-size-set="2">2px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="5">5px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="8">8px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="14">14px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="24">24px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="36">36px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="72">72px</button>
                    </div>
                </div>

                <div id="textSizeOption" class="dropdown dropdown-dark dropdown-flat flex-stretch hidden">
                    <button class="dropdown-toggle btn btn-flat btn-dark">
                        <input id="textSizeOptionInput" type="text" value="18px">
                        <svg class="icon icon-small round-180"><use xlink:href="img/icons.svg#chevron-down"></use></svg>
                    </button>
                    <div class="dropdown-menu">
                        <div class="dropdown-group">
                            <button class="btn btn-flat btn-dark" data-size-change="decrease">
                                <svg class="icon"><use xlink:href="img/icons.svg#minus"></use></svg>
                            </button>
                            <button class="btn btn-flat btn-dark" data-size-change="increase">
                                <svg class="icon"><use xlink:href="img/icons.svg#plus"></use></svg>
                            </button>
                        </div>
                        <button class="btn btn-flat btn-dark" data-size-set="6">6px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="10">10px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="14">14px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="18">18px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="24">24px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="36">36px</button>
                        <button class="btn btn-flat btn-dark" data-size-set="72">72px</button>
                    </div>
                </div>

                <div id="colorOption" class="dropdown dropdown-dark dropdown-flat flex-stretch hidden">
                    <button class="dropdown-toggle btn btn-flat btn-dark">
                        <svg class="icon" style="fill: #ff0000; stroke: #ff0000;"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                    </button>
                    <div class="dropdown-menu">
                        <div class="dropdown-group">
                            <button class="btn btn-flat btn-dark active" data-color-set="#ff0000">
                                <svg class="icon icon-red"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                            </button>
                            <button class="btn btn-flat btn-dark" data-color-set="#00ff00">
                                <svg class="icon icon-green"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                            </button>
                            <button class="btn btn-flat btn-dark" data-color-set="#0000ff">
                                <svg class="icon icon-blue"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                            </button>
                        </div>
                        <div class="dropdown-group">
                            <button class="btn btn-flat btn-dark" data-color-set="#ffffff">
                                <svg class="icon icon-white"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                            </button>
                            <button class="btn btn-flat btn-dark" data-color-set="#ffff00">
                                <svg class="icon icon-yellow"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                            </button>
                            <button class="btn btn-flat btn-dark" data-color-set="#000000">
                                <svg class="icon icon-black"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                            </button>
                        </div>
                        <button class="btn btn-flat btn-dark picker-button" data-color-picker>
                            <svg class="icon"><use xlink:href="img/icons.svg#rectangle"></use></svg>
                            Other
                        </button>
                    </div>
                </div>
                <input id="colorPicker" class="hidden" type="color">

                <div id="zoomOption" class="dropdown dropdown-dark dropdown-flat flex-stretch">
                    <button class="dropdown-toggle btn btn-flat btn-dark">
                        <input id="zoomInput" type="text" value="100%">
                        <svg class="icon icon-small round-180"><use xlink:href="img/icons.svg#chevron-down"></use></svg>
                    </button>
                    <div class="dropdown-menu">
                        <input id="zoomSlider" data-dropdown-noclose type="range" min="1" max="3" step="0.1" value="1">
                    </div>
                </div>
            </div>

            <button id="menu-toggle" class="btn btn-dark btn-flat flex-stretch">
                <svg class="icon"><use xlink:href="img/icons.svg#menu"></use></svg>
            </button>

            <div class="menu">
                <button id="saveBtn" class="btn btn-dark btn-flat flex-stretch">
                    <span class="light light-green"></span>
                    Saved
                </button>

                <div class="dropdown dropdown-dark dropdown-flat flex-stretch">
                    <button class="dropdown-toggle btn btn-dark btn-flat">
                        <svg class="icon"><use xlink:href="img/icons.svg#save"></use></svg>
                    </button>
                    <div class="dropdown-menu dropdown-menu--right">
                        <button id="imageEditLinkBtn" class="btn btn-dark btn-flat">
                            <svg class="icon icon-small"><use xlink:href="img/icons.svg#link"></use></svg>
                            Copy a link
                        </button>
                        <button id="imageDirectLinkBtn" class="btn btn-dark btn-flat">
                            <svg class="icon icon-small"><use xlink:href="img/icons.svg#link"></use></svg>
                            Copy a direct link
                        </button>
                        <button id="downloadBtn" class="btn btn-dark btn-flat">
                            <svg class="icon icon-small"><use xlink:href="img/icons.svg#download"></use></svg>
                            Download
                        </button>
                    </div>
                </div>

            </div>
        </nav>

        <div class="canvases">
            <canvas id="imageCanvas">Your browser is not supported</canvas>
            <canvas id="drawingCanvas"></canvas>
        </div>
    </main>


    <script defer src="https://www.gstatic.com/firebasejs/5.7.1/firebase.js"></script>
    <script defer src="js/utils.js"></script>
    <script defer src="js/controls.js"></script>
    <script defer src="js/logging.js"></script>
    <script defer src="js/canvas.js"></script>
    <script defer src="js/drawing-page.js"></script>
    <script type="text/javascript">
        window.addEventListener('load', function() {
            firebase.initializeApp({
                apiKey: "AIzaSyCiqM8QiC3rZImR3kY7MPscYxxUqDB0gbQ",
                authDomain: "darklight-image-editor.firebaseapp.com",
                databaseURL: "https://darklight-image-editor.firebaseio.com",
                projectId: "darklight-image-editor",
                storageBucket: "darklight-image-editor.appspot.com",
                messagingSenderId: "1080138239147"
            });

            var app = new CanvasApp(
                function() {
                    var areasElement = document.getElementsByClassName('canvases')[0];
                    return {
                        height: areasElement.scrollHeight,
                        width: areasElement.scrollWidth
                    };
                },
                imageCanvas,
                drawingCanvas
            );

            initializeControls();
            initializePage(app);

            window.app = app;
        });
    </script>
</body>
</html>
